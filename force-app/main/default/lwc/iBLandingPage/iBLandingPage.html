<template>
  <lightning-card icon-name="utility:cases">
    <pagetitle slot="title">{pageTitle}</pagetitle>
    <div class="slds-card__body_inner">
      <template if:true={jsonData}>
        <!--show this template when See More button is not clicked-->
        <template if:false={showmorearticlesflag}>
          <div class="slds-border_bottom slds-m-bottom_small"></div>
          <div class="slds-clearfix">
            <div class="slds-float_left">
              <heading>Knowledge Articles</heading>
            </div>
            <div class="slds-float_right">
              <lightning-input
                type="search"
                onchange={handleKnowledgeSearchTermChange}
                variant="label-hidden"
                class="slds-m-bottom_small"
                label="Search"
                placeholder="Search for knowledge topics"
                value={ksearchTerm}
                style="width: 300px;"
              >
              </lightning-input>
            </div>
          </div>

          <lightning-layout multiple-rows="true" pull-to-boundary="small">
        
            <template for:each={knowledgeTopics} for:item="topic">
              <lightning-layout-item
                key={topic.Id}
                size="6"
                class="slds-p-around_x-small"
              >
                <c-i-b-topic-tile topic={topic} onselected={showMoreArticles} knowledgeviewbycount={viewbycount}>
                </c-i-b-topic-tile>
              </lightning-layout-item>
            </template>
           <!--/template-->

          </lightning-layout>

          <div class="slds-border_bottom slds-m-bottom_small"></div>
          <div class="slds-clearfix">
            <div class="slds-float_left">
              <heading>Covid-19</heading>
            </div>
            <div class="slds-float_right">
              <lightning-input
                type="search"
                onchange={handleInquirySearchTermChange}
                variant="label-hidden"
                class="slds-m-bottom_small"
                label="Search"
                placeholder="Search for inquiry topics"
                value={searchTerm}
                style="width: 300px;"
              >
              </lightning-input>
            </div>
          </div>
          <lightning-layout multiple-rows="true" pull-to-boundary="small">
            <template for:each={IBLightTopics} for:item="topic">
              <lightning-layout-item
                key={topic.Id}
                size="6"
                class="slds-p-around_x-small"
              >
                <c-i-b-topic-tile topic={topic} disableseemore={disableseemore}></c-i-b-topic-tile>
              </lightning-layout-item>
            </template>
          </lightning-layout>
        </template>
        <!--show this template when See More button is clicked/inquiries are not rendered only articles-->
        <template if:true={showmorearticlesflag}>
          <div class="slds-border_bottom slds-m-bottom_small"></div>
          <!--div class="slds-clearfix">
                    
                    <div class="slds-float_right">
                        <lightning-input type="search" onchange={handleMoreArticlesSearchTermChange} variant="label-hidden"
                            class="slds-m-bottom_small" label="Search" placeholder="Search for knowledge topics"
                            value={ksearchTerm} style="width: 300px;">
                        </lightning-input>
                    </div>
          </div--> <!--commented the search logic on 2nd template-->
          <lightning-layout multiple-rows="true" pull-to-boundary="small">
            <template for:each={moreArticles} for:item="topic">
              <lightning-layout-item
                key={topic.Id}
                size="6"
                class="slds-p-around_x-small"
              >
                <c-i-b-topic-tile
                  topic={topic}
                  disableseemore={disableseemore}
                  backbutton="true"
                  onback={handleBack}
                ></c-i-b-topic-tile>
              </lightning-layout-item>
            </template>
          </lightning-layout>
        </template>
      </template>
    </div>
    <template if:true={errMsg}>
      <div class="slds-text-color_error">
        An error occurred while loading Inquery Builder: <br />
        {errMsg}
      </div>
    </template>
  </lightning-card>
</template>